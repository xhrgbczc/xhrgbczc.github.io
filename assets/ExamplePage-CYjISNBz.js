var H=Object.defineProperty;var z=Object.getOwnPropertySymbols;var Y=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var R=(r,l,a)=>l in r?H(r,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[l]=a,T=(r,l)=>{for(var a in l||(l={}))Y.call(l,a)&&R(r,a,l[a]);if(z)for(var a of z(l))j.call(l,a)&&R(r,a,l[a]);return r};var b=(r,l,a)=>new Promise((f,p)=>{var x=m=>{try{d(a.next(m))}catch(c){p(c)}},g=m=>{try{d(a.throw(m))}catch(c){p(c)}},d=m=>m.done?f(m.value):Promise.resolve(m.value).then(x,g);d((a=a.apply(r,l)).next())});import{_ as F}from"./ContentWrap.vue_vue_type_script_setup_true_lang-DjXu10um.js";import{_ as O}from"./Search.vue_vue_type_script_setup_true_lang-CYmMo2iH.js";import{h as u,c as U}from"./index-BJ6PNzdf.js";/* empty css               */import{_ as J}from"./Table.vue_vue_type_script_lang-ZXg282NS.js";import{g as K,d as q}from"./index-DyCELuqO.js";import{u as G}from"./useTable-BR5AIeAN.js";import{v as Q,r as S,V as W,M as s,H as X,u as t,x as Z,J as ee,K as P,B as te,a3 as $,P as A,k as E,a7 as ae,az as oe}from"./vue-chunks-COp0tDkU.js";import{u as ie}from"./useEventBus-BNkogk2f.js";import{u as le}from"./useCrudSchemas-B2QyfYFX.js";import{p as re}from"./element-plus-B-YefleC.js";/* empty css                *//* empty css                  */import"./Form-ByVFJKYp.js";/* empty css                     *//* empty css               *//* empty css                    */import"./el-radio-button-CPVAQuBw.js";/* empty css                        *//* empty css                  *//* empty css                   *//* empty css                *//* empty css                    */import"./InputPassword-B098eHsk.js";import"./style.css_vue_type_style_index_0_src_true_lang-B2gSSCIx.js";import"./wang-editor-FTv6NaqD.js";import"./JsonEditor.vue_vue_type_script_setup_true_lang-BXhNdvPC.js";import"./IconPicker-B1JUNNmR.js";/* empty css                      */import"./IAgree.vue_vue_type_script_setup_true_lang-BaaBG1yw.js";import"./Highlight.vue_vue_type_script_lang-C8NmNR-A.js";import"./useForm-Cl9MV4NY.js";import"./useIcon-nxIRBtYc.js";/* empty css                        *//* empty css                 *//* empty css                        *//* empty css                         *//* empty css                  */import"./index-NdPtcsqS.js";import"./tree-Dgaev6Pi.js";const ne={class:"mb-10px"};function w(r){return typeof r=="function"||Object.prototype.toString.call(r)==="[object Object]"&&!ae(r)}const Ge=Q({name:"ExamplePage",__name:"ExamplePage",setup(r){const{push:l}=oe(),a=S([]),f=S({}),p=e=>{f.value=e,_()},{tableRegister:x,tableState:g,tableMethods:d}=G({fetchDataApi:()=>b(this,null,function*(){const{currentPage:e,pageSize:o}=g,n=yield K(T({pageIndex:t(e),pageSize:t(o)},t(f)));return{list:n.data.list,total:n.data.total}}),fetchDelApi:()=>b(this,null,function*(){return!!(yield q(t(a)))})}),{loading:m,dataList:c,total:B,currentPage:h,pageSize:D}=g,{getList:_,getElTableExpose:I,delList:M}=d;_(),ie({name:"getList",callback:e=>{e==="add"&&(h.value=1),_()}});const{t:i}=U(),N=W([{field:"selection",search:{hidden:!0},form:{hidden:!0},detail:{hidden:!0},table:{type:"selection"}},{field:"index",label:i("tableDemo.index"),type:"index",search:{hidden:!0},form:{hidden:!0},detail:{hidden:!0}},{field:"title",label:i("tableDemo.title"),search:{component:"Input"},form:{component:"Input",colProps:{span:24}},detail:{span:24}},{field:"author",label:i("tableDemo.author"),search:{hidden:!0}},{field:"display_time",label:i("tableDemo.displayTime"),search:{hidden:!0},form:{component:"DatePicker",componentProps:{type:"datetime",valueFormat:"YYYY-MM-DD HH:mm:ss"}}},{field:"importance",label:i("tableDemo.importance"),search:{hidden:!0},form:{component:"Select",componentProps:{style:{width:"100%"},options:[{label:"重要",value:3},{label:"良好",value:2},{label:"一般",value:1}]}},detail:{slots:{default:e=>s(re,{type:e.importance===1?"success":e.importance===2?"warning":"danger"},{default:()=>[e.importance===1?i("tableDemo.important"):e.importance===2?i("tableDemo.good"):i("tableDemo.commonly")]})}}},{field:"pageviews",label:i("tableDemo.pageviews"),search:{hidden:!0},form:{component:"InputNumber",value:0}},{field:"content",label:i("exampleDemo.content"),search:{hidden:!0},table:{show:!1},form:{component:"Editor",colProps:{span:24}},detail:{span:24,slots:{default:e=>s("div",{innerHTML:e.content},null)}}},{field:"action",width:"260px",label:i("tableDemo.action"),search:{hidden:!0},form:{hidden:!0},detail:{hidden:!0},table:{slots:{default:e=>{let o,n,v;return s(X,null,[s(u,{type:"primary",onClick:()=>L(e.row,"edit")},w(o=i("exampleDemo.edit"))?o:{default:()=>[o]}),s(u,{type:"success",onClick:()=>L(e.row,"detail")},w(n=i("exampleDemo.detail"))?n:{default:()=>[n]}),s(u,{type:"danger",onClick:()=>C(e.row)},w(v=i("exampleDemo.del"))?v:{default:()=>[v]})])}}}}]),{allSchemas:k}=le(N),V=()=>{l("/example/example-add")},y=S(!1),C=e=>b(this,null,function*(){const o=yield I();a.value=e?[e.id]:(o==null?void 0:o.getSelectionRows().map(n=>n.id))||[],y.value=!0,yield M(t(a).length).finally(()=>{y.value=!1})}),L=(e,o)=>{l(`/example/example-${o}?id=${e.id}`)};return(e,o)=>(Z(),ee(t(F),null,{default:P(()=>[s(t(O),{schema:t(k).searchSchema,onSearch:p,onReset:p},null,8,["schema"]),te("div",ne,[s(t(u),{type:"primary",onClick:V},{default:P(()=>[$(A(t(i)("exampleDemo.add")),1)]),_:1}),s(t(u),{loading:y.value,type:"danger",onClick:o[0]||(o[0]=n=>C(null))},{default:P(()=>[$(A(t(i)("exampleDemo.del")),1)]),_:1},8,["loading"])]),s(t(J),{pageSize:t(D),"onUpdate:pageSize":o[1]||(o[1]=n=>E(D)?D.value=n:null),currentPage:t(h),"onUpdate:currentPage":o[2]||(o[2]=n=>E(h)?h.value=n:null),columns:t(k).tableColumns,data:t(c),loading:t(m),pagination:{total:t(B)},onRegister:t(x)},null,8,["pageSize","currentPage","columns","data","loading","pagination","onRegister"])]),_:1}))}});export{Ge as default};
