var i=(g,r,a)=>new Promise((p,m)=>{var d=s=>{try{n(a.next(s))}catch(c){m(c)}},l=s=>{try{n(a.throw(s))}catch(c){m(c)}},n=s=>s.done?p(s.value):Promise.resolve(s.value).then(d,l);n((a=a.apply(g,r)).next())});import{F as _}from"./Form-CgU3S3Wg.js";import{u as v}from"./useForm-gQRFLk6I.js";import{u as h}from"./useValidator-bbomfQGp.js";import"./index-YMKHBwjb.js";/* empty css                   */import{m as x,k as B,b as E}from"./element-plus-Cbe27J2b.js";import{v as V,V as y,r as F,x as C,y as D,M as w,u as P,K as M,a3 as I,H as R,ad as T}from"./vue-chunks-COp0tDkU.js";const j=V({__name:"EditPassword",setup(g){const{required:r}=h(),a=y([{field:"password",label:"旧密码",component:"InputPassword",colProps:{span:24}},{field:"newPassword",label:"新密码",component:"InputPassword",colProps:{span:24},componentProps:{strength:!0}},{field:"newPassword2",label:"确认新密码",component:"InputPassword",colProps:{span:24},componentProps:{strength:!0}}]),p=y({password:[r()],newPassword:[r(),{asyncValidator:(t,o,e)=>i(this,null,function*(){const u=yield l(),{newPassword2:f}=u;o!==f?e(new Error("新密码与确认新密码不一致")):e()})}],newPassword2:[r(),{asyncValidator:(t,o,e)=>i(this,null,function*(){const u=yield l(),{newPassword:f}=u;o!==f?e(new Error("确认新密码与新密码不一致")):e()})}]}),{formRegister:m,formMethods:d}=v(),{getFormData:l,getElFormExpose:n}=d,s=F(!1),c=()=>i(this,null,function*(){const t=yield n();(yield t==null?void 0:t.validate().catch(e=>{}))&&B.confirm("是否确认修改?","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>i(this,null,function*(){try{s.value=!0,E.success("修改成功")}catch(e){}finally{s.value=!1}})).catch(()=>{})});return(t,o)=>{const e=T("BaseButton");return C(),D(R,null,[w(P(_),{rules:p,onRegister:P(m),schema:a},null,8,["rules","onRegister","schema"]),w(P(x)),w(e,{type:"primary",onClick:c},{default:M(()=>o[0]||(o[0]=[I("确认修改")])),_:1})],64)}}});export{j as _};
